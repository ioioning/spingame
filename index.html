<!DOCTYPE html>
<html lang="ru">
<head>
    <script src="https://unpkg.com/@tonconnect/ui@latest/dist/tonconnect-ui.min.js"></script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cases & NFT Gifts</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="header">
        <div></div>
        <div class="balance" id="balance">
            <div class="balance-icon"></div>
            <span>0.07 TON</span>
        </div>
    </div>

    <div class="content">
        <!-- Home Section -->
        <div id="home-section">
            <div class="cases-grid">
                <div class="case-card trial" onclick="showCasePrizes('Trial Box')">
                    <div class="case-title">Trial Box</div>
                    <div class="case-price free">FREE</div>
                    <div class="trial-badge">TRIAL</div>
                </div>
                <div class="case-card" onclick="showCasePrizes('Sweet Box')">
                    <div class="case-title">Sweet Box</div>
                    <div class="case-price">
                        <div class="balance-icon"></div>
                        5
                    </div>
                </div>
                <div class="case-card" onclick="showCasePrizes('Star Box')">
                    <div class="case-title">Star Box</div>
                    <div class="case-price">
                        <div class="balance-icon"></div>
                        15
                    </div>
                </div>
                <div class="case-card" onclick="showCasePrizes('Golden Case')">
                    <div class="case-title">Golden Case</div>
                    <div class="case-price">
                        <div class="balance-icon"></div>
                        35
                    </div>
                </div>
                <div class="case-card" onclick="showCasePrizes('Premium Box')">
                    <div class="case-title">Premium Box</div>
                    <div class="case-price">
                        <div class="balance-icon"></div>
                        65
                    </div>
                </div>
                <div class="case-card" onclick="showCasePrizes('Diamond Case')">
                    <div class="case-title">Diamond Case</div>
                    <div class="case-price">
                        <div class="balance-icon"></div>
                        100
                    </div>
                </div>
            </div>
        </div>

        <!-- Profile Section -->
        <div id="profile-section" class="profile-section">
            <div class="profile-header">
                <h2>Profile</h2>
            </div>

            <div class="wallet-section" id="wallet-section">
                <div id="wallet-disconnected">
                    <div style="font-size: 16px; margin-bottom: 15px; color: #888;">
                        Connect your TON wallet
                    </div>
                    <button class="connect-btn" id="connect-wallet-btn">
                        Connect Wallet
                    </button>
                    <div style="margin-top: 15px;">
                        <button class="deposit-btn" onclick="showDepositModal()">Manual Deposit</button>
                    </div>
                </div>

                <div id="wallet-connected" style="display: none;">
                    <div class="wallet-info">
                        <div class="balance-icon" style="width: 20px; height: 20px;"></div>
                        <div>
                            <div style="font-size: 14px; font-weight: 600;">Connected</div>
                            <div class="wallet-address" id="wallet-address">Loading...</div>
                        </div>
                    </div>
                    <div class="ton-amount" id="wallet-balance">
                        Loading...
                    </div>
                    <button class="disconnect-btn" id="disconnect-wallet-btn">
                        Disconnect
                    </button>
                    <div style="margin-top: 15px;">
                        <button class="deposit-btn" onclick="showDepositModal()">Manual Deposit</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Tasks Section -->
        <div id="tasks-section" class="profile-section">
            <div class="task-item">
                <div class="task-info">
                    <div class="task-title">Invite friends</div>
                    <div class="task-description">Invite 20 people</div>
                    <div class="task-progress">
                        <div class="task-progress-fill" style="width: 0%"></div>
                    </div>
                    <div class="task-progress-text">0/20 people subscribed to the channel</div>
                </div>
                <button class="share-btn" onclick="shareBot()">Share</button>
            </div>
            
            <div class="task-item">
                <div class="task-info">
                    <div class="task-title">Subscribe on channel</div>
                    <div class="task-description">Subscribe on channel</div>
                    <div class="task-progress">
                        <div class="task-progress-fill" style="width: 0%"></div>
                    </div>
                    <div class="task-progress-text">0/1 subscription</div>
                </div>
                <button class="share-btn" onclick="openChannel()">Join</button>
            </div>

            <div class="task-item">
                <div class="task-info">
                    <div class="task-title">Open case</div>
                    <div class="task-description">Open 10 cases</div>
                    <div class="task-progress">
                        <div class="task-progress-fill" style="width: 0%"></div>
                    </div>
                    <div class="task-progress-text">0/10 cases</div>
                </div>
            </div>

            <div class="task-item">
                <div class="task-info">
                    <div class="task-title">Deposit 1 ton</div>
                    <div class="task-description">Deposit 1 ton</div>
                    <div class="task-progress">
                        <div class="task-progress-fill" style="width: 0%"></div>
                    </div>
                    <div class="task-progress-text">0/1 TON</div>
                </div>
            </div>
        </div>
    </div>

    <div class="bottom-nav">
        <div class="nav-item active" onclick="switchTab('home')">
            <span>Home</span>
        </div>
        <div class="nav-item" onclick="switchTab('profile')">
            <span>Profile</span>
        </div>
        <div class="nav-item" onclick="switchTab('tasks')">
            <span>Tasks</span>
        </div>
    </div>

    <!-- Deposit Modal -->
    <div id="deposit-modal" class="modal">
        <div class="modal-content">
            <div class="modal-title">Deposit TON</div>
            <div class="ton-address">UQDx5LBGp7K7A5hrYu4y6W5RPO4hwk5fL_LWzov0FlYeJMMp</div>
            <button class="copy-btn" onclick="copyAddress()">Copy Address</button>
            <button class="close-btn" onclick="closeDepositModal()">Close</button>
        </div>
    </div>

    <!-- Case Prizes Modal -->
    <div id="case-modal" class="modal">
        <div class="modal-content">
            <div class="modal-title" id="case-title">Case Prizes</div>
            <div class="case-prizes" id="case-prizes">
                <!-- Will be populated by JavaScript -->
            </div>
            <div id="spinner-container" class="spinner-container" style="display: none;">
                <div class="spinner-pointer"></div>
                <div class="spinner-track" id="spinner-track"></div>
            </div>
            <div id="spin-result" class="spin-result">
                <div class="result-title" id="result-title">You won!</div>
                <div class="result-value" id="result-value"> 5 TON</div>
            </div>
            <div id="spin-section">
                <button class="spin-btn" id="spin-btn" onclick="startSpinWithWallet()">SPIN</button>
                <div class="insufficient-funds" id="insufficient-funds" style="display: none;">
                    Not enough TON to open this case
                </div>
                <div class="trial-notice" id="trial-notice" style="display: none;">
                    This is a trial box! Prizes are not real and won't be added to your inventory.
                </div>
            </div>
            <button class="close-btn" onclick="closeCaseModal()" style="margin-top: 20px;">Close</button>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
